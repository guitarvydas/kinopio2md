# Overview of Kinopio2md

The goal of Kinopio2md is to convert "cards" into indented, point-form markdown.  The markdown is intended to be pasted into ChatGPT for conversion to paragraphs of prose (instead of point-form).

For example, the following Kinopio "page" ...
![[Screenshot 2023-10-29 at 10.24.11 PM.png]]
... is converted to:
```
control flow is not data
- control flow is _interpretation_ of data - dynamic flow
    - a CPU is an interpreter
        - a CPU interprets _opcodes_
        - a CPU interprets _opcodes_ so quickly that we think of it as something other than interpretation
- data is _static_ - and is not interpreted by the underlying system
    - static data is interpreted by the _program_, not the CPU
```

Kinopio is a tool which allows the user to create "cards" containing bits of text (<= 300 characters) and to connect such cards by visible, directional lines whose meaning is unspecified.  Kinopio allows users to create digital gardens and "mind maps" without getting in the way (a problem that most mind-mapping tools have).

Kinopio "cards" and "connections" are rendered on web pages, called "spaces".

Single pages can be exported as downloadable JSON data.  The data contains information on how the cards are rendered by the Kinopio tool, along with the bits of text, along with a description of each "connection".

Kinopio2md assumes that each page is a *tree* of interrelated information, with the cards being nodes in the tree and connections between nodes specified by Kinopio, being tree-branches.  At present, we simply assume that *all* Kinopio connections represent tree branches.  Later, when the tool has been debugged, we might wish to ascribe different meanings to the various types of Kinopio connections, for example, maybe `"connectionTypeId":"gH2uKbIRws6FMCtnp5XND"` will be taken to mean *branch*, whereas `"connectionTypeId":"...???..."` will mean *footnote*, etc.

The intention is to paste the markdown into ChatGPT after priming with the prompt "summarize the following markdown as a subsection for a chapter in a book".  ChatGPT will rewrite the point-form into prose form.

# Initial (Experimental) Design

![[top level.png]]
The experimental Design of kinopio2md consists of 6 stages:
1. Read Text File
2. Escape Whitespace
3. Extract Semantic Information
4. Transpile Cards to PROLOG
5. Generate Markdown
6. Unescape Whitespace

We want to convert JSON Kinopio cards to Prolog facts, then run a small Prolog program `md.pl` to search through the facts and to rearrange the text contained in the facts to look like markdown. 

# Before and After
## JSON Generated By Kinopio
```
{"id":"FhzG4AniDsQj1ilz2N7FA","name":"software atoms test","privacy":"private","isRemoved":false,"isHidden":false,"isTemplate":false,"showInExplore":false,"visits":0,"proposedShowInExplore":false,"showInExploreUpdatedAt":null,"removedByUserId":null,"collaboratorKey":"MzbBTdl0pZFO5H08UMg9k","readOnlyKey":"gZurpGthq1K-URgS0NV_b","background":"","backgroundTint":"","moonPhase":"","userId":"5My83_-9fXJKx6a3cuq8s","defaultCardMaxWidth":230,"cards":[{"id":"QdcyjbU3Vhvvey7G2O3E1","x":99,"y":170,"z":8,"name":"control flow is not data","frameId":0,"userId":"5My83_-9fXJKx6a3cuq8s","urlPreviewIsVisible":true,"width":192,"height":33,"isLocked":false,"backgroundColor":null,"spaceId":"FhzG4AniDsQj1ilz2N7FA","nameUpdatedAt":"2023-10-29T14:56:30.039Z","nameUpdatedByUserId":"5My83_-9fXJKx6a3cuq8s"},{"id":"hrA0G0cV8-2jTwzZbZeXN","x":245,"y":218,"z":9,"name":"control flow is _interpretation_ of data - dynamic flow","frameId":0,"width":230,"height":51,"userId":"5My83_-9fXJKx6a3cuq8s","backgroundColor":null,"shouldUpdateUrlPreview":false,"urlPreviewIsVisible":true,"nameUpdatedAt":"2023-10-29T14:56:44.105Z","nameUpdatedByUserId":"5My83_-9fXJKx6a3cuq8s"},{"id":"7BwhZNgIsA5BoJSMYfomd","x":395,"y":281,"z":11,"name":"a CPU is an interpreter","frameId":0,"width":191,"height":33,"userId":"5My83_-9fXJKx6a3cuq8s","backgroundColor":null,"shouldUpdateUrlPreview":false,"urlPreviewIsVisible":true,"nameUpdatedAt":"2023-10-29T14:56:55.554Z","nameUpdatedByUserId":"5My83_-9fXJKx6a3cuq8s"},{"id":"1iqhffqqZDb4mCCOpXIet","x":463,"y":329,"z":13,"name":"a CPU interprets _opcodes_","frameId":0,"width":212,"height":33,"userId":"5My83_-9fXJKx6a3cuq8s","backgroundColor":null,"shouldUpdateUrlPreview":false,"urlPreviewIsVisible":true,"nameUpdatedAt":"2023-10-29T14:57:04.878Z","nameUpdatedByUserId":"5My83_-9fXJKx6a3cuq8s"},{"id":"imhGfRoM95ixnSB-N0D5g","x":458,"y":375,"z":15,"name":"a CPU interprets _opcodes_ so quickly that we think of it as something other than interpretation","frameId":0,"width":230,"height":87,"userId":"5My83_-9fXJKx6a3cuq8s","backgroundColor":null,"shouldUpdateUrlPreview":false,"urlPreviewIsVisible":true,"nameUpdatedAt":"2023-10-29T14:57:18.225Z","nameUpdatedByUserId":"5My83_-9fXJKx6a3cuq8s"},{"id":"kG4t71uepUS36ToC_iLvh","x":245,"y":488,"z":16,"name":"data is _static_ - and is not interpreted by the underlying system","frameId":0,"width":230,"height":69,"userId":"5My83_-9fXJKx6a3cuq8s","backgroundColor":null,"shouldUpdateUrlPreview":false,"urlPreviewIsVisible":true,"nameUpdatedAt":"2023-10-29T14:57:38.318Z","nameUpdatedByUserId":"5My83_-9fXJKx6a3cuq8s"},{"id":"NszFdu5PKUwsja7G_czC2","x":411,"y":562,"z":18,"name":"static data is interpreted by the _program_, not the CPU","frameId":0,"width":230,"height":51,"userId":"5My83_-9fXJKx6a3cuq8s","backgroundColor":null,"shouldUpdateUrlPreview":false,"urlPreviewIsVisible":true,"nameUpdatedAt":"2023-10-29T14:57:47.771Z","nameUpdatedByUserId":"5My83_-9fXJKx6a3cuq8s"}],"connections":[{"startCardId":"QdcyjbU3Vhvvey7G2O3E1","endCardId":"hrA0G0cV8-2jTwzZbZeXN","path":"m276,186 q00,00 184,48","controlPoint":"q00,00","id":"OSwNQQ7JEccAT1PV1pH7r","spaceId":"FhzG4AniDsQj1ilz2N7FA","userId":"5My83_-9fXJKx6a3cuq8s","connectionTypeId":"4TR-Saps8RXfUKXtkhJ7j"},{"startCardId":"hrA0G0cV8-2jTwzZbZeXN","endCardId":"7BwhZNgIsA5BoJSMYfomd","path":"m460,234 q00,00 111,63","controlPoint":"q00,00","id":"NvMi_0_vPyb3RRQio2JH5","spaceId":"FhzG4AniDsQj1ilz2N7FA","userId":"5My83_-9fXJKx6a3cuq8s","connectionTypeId":"4TR-Saps8RXfUKXtkhJ7j"},{"startCardId":"7BwhZNgIsA5BoJSMYfomd","endCardId":"1iqhffqqZDb4mCCOpXIet","path":"m571,297 q00,00 89,48","controlPoint":"q00,00","id":"xGJjNUxKBQo8AcF-AIWt5","spaceId":"FhzG4AniDsQj1ilz2N7FA","userId":"5My83_-9fXJKx6a3cuq8s","connectionTypeId":"4TR-Saps8RXfUKXtkhJ7j"},{"startCardId":"7BwhZNgIsA5BoJSMYfomd","endCardId":"imhGfRoM95ixnSB-N0D5g","path":"m571,296 q00,00 101,93","controlPoint":"q00,00","id":"7elzpUCSfAbZx-PyoImUD","spaceId":"FhzG4AniDsQj1ilz2N7FA","userId":"5My83_-9fXJKx6a3cuq8s","connectionTypeId":"4TR-Saps8RXfUKXtkhJ7j"},{"startCardId":"kG4t71uepUS36ToC_iLvh","endCardId":"NszFdu5PKUwsja7G_czC2","path":"m460,503 q00,00 166,80","controlPoint":"q00,00","id":"3LCCZmlImrvBuct-EMdZ5","spaceId":"FhzG4AniDsQj1ilz2N7FA","userId":"5My83_-9fXJKx6a3cuq8s","connectionTypeId":"4TR-Saps8RXfUKXtkhJ7j"},{"startCardId":"QdcyjbU3Vhvvey7G2O3E1","endCardId":"kG4t71uepUS36ToC_iLvh","path":"m276,184 q00,00 183,315","controlPoint":"q00,00","id":"egAUQXT5xY4DxoZN7fEjJ","spaceId":"FhzG4AniDsQj1ilz2N7FA","userId":"5My83_-9fXJKx6a3cuq8s","connectionTypeId":"4TR-Saps8RXfUKXtkhJ7j"}],"connectionTypes":[{"id":"4TR-Saps8RXfUKXtkhJ7j","name":"Connection Type 1","color":"#9576f2","userId":"5My83_-9fXJKx6a3cuq8s"}],"boxes":[],"users":[{"id":"5My83_-9fXJKx6a3cuq8s","lastSpaceId":"FhzG4AniDsQj1ilz2N7FA","color":"#ffc1f3","apiKey":"087b52ba-5a9e-4de8-a894-e4fce49579db","arenaAccessToken":"","favoriteUsers":[],"favoriteSpaces":[{"id":"RsNlFy1k27YFs3BgFpuYN","name":"Tuesday Mar 23/21","url":"tuesday-mar-23-21-RsNlFy1k27YFs3BgFpuYN","privacy":"private","isRemoved":false,"isHidden":false,"isFromTweet":false,"isTemplate":false,"showInExplore":false,"proposedShowInExplore":false,"showInExploreUpdatedAt":"2020-12-14T22:19:27.386Z","removedByUserId":null,"readOnlyKey":"c5114711-d183-4f30-98e8-694602068bb4","updateHash":"WdVVsgvBiYOoHTI3cvWXK","background":"","backgroundTint":null,"moonPhase":"waxing-gibbous","originSpaceId":"","editedAt":"2021-03-26T21:59:21.570Z","editedByUserId":null,"visits":1,"defaultCardMaxWidth":200,"createdAt":"2020-04-06T03:18:02.629Z","updatedAt":"2023-07-24T17:06:16.858Z","userId":"TF1wcy7y6a0H-_w5KQezD","userFavoriteSpace":{"createdAt":"2023-04-20T13:02:17.348Z","updatedAt":"2023-04-20T13:02:17.348Z","userId":"5My83_-9fXJKx6a3cuq8s","spaceId":"RsNlFy1k27YFs3BgFpuYN"},"user":{"id":"TF1wcy7y6a0H-_w5KQezD","name":"humdrum","description":"just humdrumming along","website":"https://kinopio.club/-the-central-hub-nTfUzCV1vnLedTHiWGWcE","color":"rgb(15, 128, 234)","isModerator":true,"isGuideMaker":true,"isDonor":true,"isAmbassador":true,"stripeSubscriptionId":"sub_JOlgzJA2HqPIvw","appleSubscriptionIsActive":null}}],"favoriteColors":[],"cardsCreatedCount":18012,"isUpgraded":true,"isModerator":false,"isGuideMaker":false,"filterShowUsers":false,"filterShowDateUpdated":false,"filterShowAbsoluteDates":true,"filterUnchecked":false,"filterComments":false,"journalPrompts":[],"shouldCreateJournalsWithDailyPrompt":true,"newSpacesAreBlank":true,"shouldEmailNotifications":true,"shouldEmailBulletin":true,"shouldEmailWeeklyReview":true,"shouldShowMoreAlignOptions":false,"shouldUseLastConnectionType":true,"shouldShowItemActions":true,"shouldShowMultipleSelectedItemActions":true,"shouldDisableRightClickToPan":false,"shouldShowCurrentSpaceTags":false,"showInExploreUpdatedAt":"2023-10-15T08:54:54.206Z","dialogSpaceFilters":null,"dialogSpaceFilterByUser":{},"dialogSpaceFilterShowHidden":false,"defaultConnectionControlPoint":"q00,00","downgradeAt":null,"showWeather":false,"weatherUnitIsCelcius":false,"shouldUseStickyCards":true,"shouldPauseConnectionDirections":false,"lastUsedImagePickerService":"ai","AIImages":[],"theme":"light","themeIsSystem":false,"referredByUserId":null,"advocateReferrerName":null,"weather":"","journalDailyPrompt":"Imagine you have suddenly grown wings. Describe your first flight. Where would you go, who would you visit and what would you do?","panSpeedIsFast":false,"outsideSpaceBackgroundIsStatic":true,"shouldDisableHapticFeedback":false,"appleAppAccountToken":"d7b5db67-2eb1-4298-bea1-0a5d32ec376a","appleSubscriptionIsActive":null,"studentDiscountIsAvailable":false,"name":"Paul","description":null,"website":null,"url":"paul-5My83_-9fXJKx6a3cuq8s","email":"paultarvydas@gmail.com","emailIsVerified":false,"lastReadNewStuffId":"https://blog.kinopio.club/posts/read-only-invite/","defaultSpaceBackground":"","defaultSpaceBackgroundTint":"","defaultCardBackgroundColor":null,"isDonor":null,"isAmbassador":null,"weatherLocation":null,"creditsUsed":0,"creditsEarned":0,"createdAt":"2022-06-14T22:35:51.624Z","updatedAt":1698420529690,"stripeSubscriptionId":"sub_1LEPT6DFIr5ywhworsrLSy43"}],"tags":[],"collaborators":[],"spectators":[],"clients":[],"isFromTweet":false,"cacheDate":1565295601072,"removedCards":[],"url":"sw-atoms-abridged-01j3Jkawjd1mOpo60QrI6","updateHash":"gl388DEj3wHpX9chDeQyp","originSpaceId":"","editedAt":"2023-10-29T14:56:18.684Z","editedByUserId":null,"createdAt":"2023-10-29T14:56:18.684Z","updatedAt":"2023-10-25T09:03:22.016Z"}
```
## PROLOG Conversion
```
text('QdcyjbU3Vhvvey7G2O3E1','control%20flow%20is%20not%20data').
text('hrA0G0cV8-2jTwzZbZeXN','control%20flow%20is%20_interpretation_%20of%20data%20-%20dynamic%20flow').
text('7BwhZNgIsA5BoJSMYfomd','a%20CPU%20is%20an%20interpreter').
text('1iqhffqqZDb4mCCOpXIet','a%20CPU%20interprets%20_opcodes_').
text('imhGfRoM95ixnSB-N0D5g','a%20CPU%20interprets%20_opcodes_%20so%20quickly%20that%20we%20think%20of%20it%20as%20something%20other%20than%20interpretation').
text('kG4t71uepUS36ToC_iLvh','data%20is%20_static_%20-%20and%20is%20not%20interpreted%20by%20the%20underlying%20system').
text('NszFdu5PKUwsja7G_czC2','static%20data%20is%20interpreted%20by%20the%20_program_%2C%20not%20the%20CPU').
connection('QdcyjbU3Vhvvey7G2O3E1','hrA0G0cV8-2jTwzZbZeXN','4TR-Saps8RXfUKXtkhJ7j').
connection('hrA0G0cV8-2jTwzZbZeXN','7BwhZNgIsA5BoJSMYfomd','4TR-Saps8RXfUKXtkhJ7j').
connection('7BwhZNgIsA5BoJSMYfomd','1iqhffqqZDb4mCCOpXIet','4TR-Saps8RXfUKXtkhJ7j').
connection('7BwhZNgIsA5BoJSMYfomd','imhGfRoM95ixnSB-N0D5g','4TR-Saps8RXfUKXtkhJ7j').
connection('kG4t71uepUS36ToC_iLvh','NszFdu5PKUwsja7G_czC2','4TR-Saps8RXfUKXtkhJ7j').
connection('QdcyjbU3Vhvvey7G2O3E1','kG4t71uepUS36ToC_iLvh','4TR-Saps8RXfUKXtkhJ7j').
```